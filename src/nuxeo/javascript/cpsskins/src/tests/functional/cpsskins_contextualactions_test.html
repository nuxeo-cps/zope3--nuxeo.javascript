<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xml:lang="en" lang="en"
      xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>CPSSkins Unit test file</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <script src="../prototype.js" type="text/javascript"></script>
  <script src="../json.js" type="text/javascript"></script>
  <script src="../../cpsskins.js" type="text/javascript"></script>
  <link rel="stylesheet" href="../../cpsskins.css" type="text/css" />
  <link rel="stylesheet" href="contextualmenus.css" type="text/css" />
</head>

<body>

  <ins class="controller">
  {"id": "show-hide-menu",
   "type": "focus observer"
  }
  </ins>

  <ins class="controller">
  {"id": "do-action",
   "type": "command"
  }}
  </ins>

  <h1>CPSSkins: Contextual actions</h1>

  <div style="float: left; margin: 1em">

    <!-- View: contextual actions widget -->
    <ins class="view">
    {"id": "menu",
     "selectors": ["div"],
     "widget": {
       "type": "contextactions",
       "items": [
         {"type": "item",
          "label": "Edit",
          "icon": "edit.png",
          "action": "edit",
          "visible": "editable"
         },
         {"type": "item",
          "label": "Copy",
          "icon": "copy.png",
          "action": "copy"
         },
         {"type": "item",
          "label": "Paste",
          "icon": "paste.png",
          "action": "paste",
          "visible": "editable"
         },
         {"type": "item",
          "label": "Delete",
          "icon": "delete.png",
          "action": "delete",
          "confirm": "Deleting are you sure"
         }
       ]
     },
     "controllers": ["show-hide-menu", "do-action"],
     "show_effect": {
       "transition": "fadein"
     },
     "hide_effect": {
       "transition": "fadeout"
     }
    }
    </ins>

    <ins class="model">
    {"id": "m1",
     "data": {
      "copyable":true
    }}
    </ins>
    <div id="area1" class="pad">area1</div>

    <div id="area2" class="pad">area2</div>

    <ins class="model">
    {"id": "m2",
     "data": {
      "editable":true
    }}
    </ins>
    <div id="area3" class="pad">area3</div>

    <ins class="model">
    {"id": "m3",
     "data": {
      "editable":true
    }}
    </ins>
    <div id="area4" class="pad">area4

      <ins class="model">
      {"id": "m3",
       "data": {
        "editable":true
      }}
      </ins>
      <div id="area5" class="pad">area5</div>
    </div>
  </div>

  <!-- Controller -->
  <script type="text/javascript">
    function displayChoice(event) {
      var context = event.target;
      var options = event.options;

      $("message").innerHTML +=
        context.getAttribute('id') + ' =&gt; ' + options.choice + '\n';
    }

    CPSSkins.addActions({
      'edit': displayChoice,
      'copy': displayChoice,
      'paste': displayChoice,
      'format': displayChoice,
      'size': displayChoice,
      'delete': displayChoice
      });
  </script>

  <pre id="message"></pre>

</body>

</html>
